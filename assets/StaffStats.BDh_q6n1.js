import{_ as x,j as A,u as g,r as w,k as m,P as f,c as e,d as i,b as t,l as C,a as P,e as p,w as T,n as d,F as N,p as V,g as o,v as I,t as n}from"./index.uKfIfdg1.js";const L={class:"staff-stats-page page-container"},B={class:"content-wrapper"},R={class:"card"},U={class:"card"},E={key:0,class:"empty-state"},O={class:"staff-content"},$={class:"staff-header"},j={class:"staff-name"},q={key:0,class:"staff-amount"},z={class:"staff-details"},D={class:"detail-item"},M={class:"detail-value"},G={class:"detail-item"},H={class:"detail-value"},J={key:0,class:"detail-item"},K={class:"detail-value"},Q={key:1,class:"detail-item"},W={class:"detail-value profit"},X={key:2,class:"detail-item"},Y={class:"detail-value"},Z={__name:"StaffStats",setup(tt){const k=P(),c=A(),v=g(),u=w("today"),y=m(()=>v.hasPermission(f.STAFF_STATS_ALL)),r=m(()=>v.hasPermission(f.STATS_PROFIT)),S=m(()=>{let l=[];switch(u.value){case"today":l=c.todaySalespersonStats;break;case"month":l=c.monthSalespersonStats;break;case"total":l=c.salespersonStats;break;default:l=[]}return y.value?l:l.filter(s=>s.name===v.currentUserName)});return(l,s)=>{const h=p("van-nav-bar"),_=p("van-tab"),F=p("van-tabs");return o(),e("div",L,[i(h,{title:"å‘˜å·¥ä¸šç»©","left-arrow":"",onClickLeft:s[0]||(s[0]=a=>C(k).back())}),t("div",B,[t("div",R,[i(F,{active:u.value,"onUpdate:active":s[1]||(s[1]=a=>u.value=a)},{default:T(()=>[i(_,{title:"ä»Šæ—¥",name:"today"}),i(_,{title:"æœ¬æœˆ",name:"month"}),i(_,{title:"æ€»è®¡",name:"total"})]),_:1},8,["active"])]),t("div",U,[s[8]||(s[8]=t("div",{class:"section-title"},"ğŸ† ä¸šç»©æ’è¡Œ",-1)),S.value.length===0?(o(),e("div",E,[...s[2]||(s[2]=[t("div",{class:"empty-state-icon"},"ğŸ“Š",-1),t("div",{class:"empty-state-text"},"æš‚æ— æ•°æ®",-1)])])):d("",!0),(o(!0),e(N,null,V(S.value,(a,b)=>(o(),e("div",{key:a.name,class:"staff-card"},[t("div",{class:I(["rank-badge",`rank-${b+1}`])},n(b+1),3),t("div",O,[t("div",$,[t("div",j,n(a.name),1),r.value?(o(),e("div",q,"Â¥"+n(a.totalAmount.toFixed(2)),1)):d("",!0)]),t("div",z,[t("div",D,[s[3]||(s[3]=t("span",{class:"detail-label"},"é”€å”®å•æ•°",-1)),t("span",M,n(a.salesCount)+" å•",1)]),t("div",G,[s[4]||(s[4]=t("span",{class:"detail-label"},"é”€å”®ä»¶æ•°",-1)),t("span",H,n(a.quantity)+" ä»¶",1)]),r.value?(o(),e("div",J,[s[5]||(s[5]=t("span",{class:"detail-label"},"æ€»é”€å”®é¢",-1)),t("span",K,"Â¥"+n(a.totalAmount.toFixed(2)),1)])):d("",!0),r.value?(o(),e("div",Q,[s[6]||(s[6]=t("span",{class:"detail-label"},"æ€»åˆ©æ¶¦",-1)),t("span",W,"Â¥"+n(a.totalProfit.toFixed(2)),1)])):d("",!0),r.value?(o(),e("div",X,[s[7]||(s[7]=t("span",{class:"detail-label"},"å®¢å•ä»·",-1)),t("span",Y,"Â¥"+n((a.totalAmount/a.salesCount).toFixed(2)),1)])):d("",!0)])])]))),128))])])])}}},at=x(Z,[["__scopeId","data-v-c4330304"]]);export{at as default};
