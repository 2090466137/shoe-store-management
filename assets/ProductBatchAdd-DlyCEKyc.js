var U=(h,P,g)=>new Promise((p,f)=>{var l=u=>{try{a(g.next(u))}catch(k){f(k)}},x=u=>{try{a(g.throw(u))}catch(k){f(k)}},a=u=>u.done?p(u.value):Promise.resolve(u.value).then(l,x);a((g=g.apply(h,P)).next())});import{_ as H,i as R,r as C,k as q,c as b,d as s,b as t,w as c,e as d,l as j,a as G,n as J,F as z,p as B,t as v,f as F,g as y,v as K,s as m,z as M,A as I}from"./index-B03wA3Sl.js";const O={class:"batch-add-page page-container"},Q={class:"content-wrapper"},W={class:"card"},X={class:"card"},Y={class:"size-grid"},Z=["onClick"],ee={class:"size-tip"},le={key:0,class:"card"},oe={class:"section-title"},te={class:"preview-list"},ae={class:"preview-name"},se={class:"preview-meta"},ne={class:"actions"},re={__name:"ProductBatchAdd",setup(h){const P=G(),g=R(),p=C(!1),f=C(!1),l=C({code:"",color:"",category:"",costPrice:"",salePrice:"",stock:"10"}),x=["34","35","36","37","38","39","40","41"],a=C([]),u=["é«˜è·Ÿé‹","å¹³åº•é‹","è¿åŠ¨é‹","ä¼‘é—²é‹","å‡‰é‹","æ‹–é‹","é´å­","å•é‹","å¸†å¸ƒé‹","æ¿é‹","åšåº•é‹","å…¶ä»–"],k=n=>{const e=a.value.indexOf(n);e>-1?a.value.splice(e,1):a.value.push(n),a.value.sort((_,i)=>parseInt(_)-parseInt(i))},T=({selectedOptions:n})=>{l.value.category=n[0].text||n[0],p.value=!1},V=q(()=>!l.value.code||!l.value.color||a.value.length===0?[]:a.value.map(n=>({name:`${l.value.code}-${l.value.color}-${n}ç `,code:l.value.code,color:l.value.color,size:n,category:l.value.category,costPrice:parseFloat(l.value.costPrice)||0,salePrice:parseFloat(l.value.salePrice)||0,stock:parseInt(l.value.stock)||0,minStock:5}))),N=q(()=>l.value.code&&l.value.color&&l.value.category&&l.value.costPrice&&l.value.salePrice&&l.value.stock&&a.value.length>0),A=()=>U(this,null,function*(){if(!N.value){m("è¯·å¡«å†™å®Œæ•´ä¿¡æ¯å¹¶é€‰æ‹©å°ºç ");return}const n=parseFloat(l.value.costPrice),e=parseFloat(l.value.salePrice),_=parseInt(l.value.stock);if(isNaN(n)||n<=0){m("è¯·è¾“å…¥æœ‰æ•ˆçš„æˆæœ¬ä»·");return}if(isNaN(e)||e<=0){m("è¯·è¾“å…¥æœ‰æ•ˆçš„é”€å”®ä»·");return}if(isNaN(_)||_<0){m("è¯·è¾“å…¥æœ‰æ•ˆçš„åº“å­˜æ•°é‡");return}M({message:"æ­£åœ¨æ·»åŠ ...",forbidClick:!0,duration:0});try{let i=0,r=0;for(const w of V.value)try{yield g.addProduct(w),i++}catch($){console.error("æ·»åŠ å•†å“å¤±è´¥:",w.name,$),r++}I(),r===0?(m({type:"success",message:`æˆåŠŸæ·»åŠ  ${i} ä¸ªå•†å“ï¼`}),setTimeout(()=>{P.back()},1e3)):m({type:"warning",message:`æˆåŠŸ ${i} ä¸ªï¼Œå¤±è´¥ ${r} ä¸ª`})}catch(i){I(),m("æ‰¹é‡æ·»åŠ å¤±è´¥"),console.error("æ‰¹é‡æ·»åŠ å¼‚å¸¸:",i)}});return(n,e)=>{const _=d("van-icon"),i=d("van-nav-bar"),r=d("van-field"),w=d("van-form"),$=d("van-button"),L=d("van-picker"),D=d("van-popup"),E=d("van-dialog");return y(),b("div",O,[s(i,{title:"æ‰¹é‡æ·»åŠ å•†å“","left-arrow":"",onClickLeft:e[1]||(e[1]=o=>j(P).back())},{right:c(()=>[s(_,{name:"question-o",onClick:e[0]||(e[0]=o=>f.value=!0)})]),_:1}),t("div",Q,[t("div",W,[e[15]||(e[15]=t("div",{class:"section-title"},"ğŸ“ åŸºæœ¬ä¿¡æ¯",-1)),s(w,null,{default:c(()=>[s(r,{modelValue:l.value.code,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.code=o),name:"code",label:"è´§å·",placeholder:"ä¾‹å¦‚ï¼š206731-2",rules:[{required:!0,message:"è¯·è¾“å…¥è´§å·"}]},null,8,["modelValue"]),s(r,{modelValue:l.value.color,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.color=o),name:"color",label:"é¢œè‰²",placeholder:"è¯·è¾“å…¥é¢œè‰²",rules:[{required:!0,message:"è¯·è¾“å…¥é¢œè‰²"}]},null,8,["modelValue"]),s(r,{modelValue:l.value.category,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.category=o),name:"category",label:"åˆ†ç±»",placeholder:"è¯·é€‰æ‹©åˆ†ç±»","is-link":"",readonly:"",onClick:e[5]||(e[5]=o=>p.value=!0),rules:[{required:!0,message:"è¯·é€‰æ‹©åˆ†ç±»"}]},null,8,["modelValue"]),s(r,{modelValue:l.value.costPrice,"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.costPrice=o),name:"costPrice",type:"number",label:"æˆæœ¬ä»·",placeholder:"è¯·è¾“å…¥æˆæœ¬ä»·",rules:[{required:!0,message:"è¯·è¾“å…¥æˆæœ¬ä»·"}]},{button:c(()=>[...e[12]||(e[12]=[t("span",null,"å…ƒ",-1)])]),_:1},8,["modelValue"]),s(r,{modelValue:l.value.salePrice,"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.salePrice=o),name:"salePrice",type:"number",label:"é”€å”®ä»·",placeholder:"è¯·è¾“å…¥é”€å”®ä»·",rules:[{required:!0,message:"è¯·è¾“å…¥é”€å”®ä»·"}]},{button:c(()=>[...e[13]||(e[13]=[t("span",null,"å…ƒ",-1)])]),_:1},8,["modelValue"]),s(r,{modelValue:l.value.stock,"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.stock=o),name:"stock",type:"number",label:"æ¯ä¸ªå°ºç åº“å­˜",placeholder:"è¯·è¾“å…¥åº“å­˜æ•°é‡",rules:[{required:!0,message:"è¯·è¾“å…¥åº“å­˜æ•°é‡"}]},{button:c(()=>[...e[14]||(e[14]=[t("span",null,"ä»¶",-1)])]),_:1},8,["modelValue"])]),_:1})]),t("div",X,[e[16]||(e[16]=t("div",{class:"section-title"},"ğŸ‘Ÿ é€‰æ‹©å°ºç ",-1)),t("div",Y,[(y(),b(z,null,B(x,o=>t("div",{key:o,class:K(["size-item",{active:a.value.includes(o)}]),onClick:S=>k(o)},v(o)+"ç  ",11,Z)),64))]),t("div",ee," å·²é€‰æ‹© "+v(a.value.length)+" ä¸ªå°ºç  ",1)]),V.value.length>0?(y(),b("div",le,[t("div",oe,"ğŸ‘€ é¢„è§ˆï¼ˆå°†æ·»åŠ  "+v(V.value.length)+" ä¸ªå•†å“ï¼‰",1),t("div",te,[(y(!0),b(z,null,B(V.value,(o,S)=>(y(),b("div",{key:S,class:"preview-item"},[t("div",ae,v(o.name),1),t("div",se,[t("span",null,v(o.size)+"ç ",1),t("span",null,"åº“å­˜: "+v(o.stock)+"ä»¶",1),t("span",null,"Â¥"+v(o.salePrice),1)])]))),128))])])):J("",!0),t("div",ne,[s($,{type:"primary",block:"",round:"",size:"large",disabled:!N.value,onClick:A},{default:c(()=>[F(" æ‰¹é‡æ·»åŠ  "+v(a.value.length)+" ä¸ªå•†å“ ",1)]),_:1},8,["disabled"])])]),s(D,{show:p.value,"onUpdate:show":e[10]||(e[10]=o=>p.value=o),position:"bottom",round:"",closeable:"","close-icon":"close",style:{paddingTop:"46px"}},{default:c(()=>[s(L,{columns:u,onConfirm:T,onCancel:e[9]||(e[9]=o=>p.value=!1)})]),_:1},8,["show"]),s(E,{show:f.value,"onUpdate:show":e[11]||(e[11]=o=>f.value=o),title:"ä½¿ç”¨è¯´æ˜","confirm-button-text":"çŸ¥é“äº†"},{default:c(()=>[...e[17]||(e[17]=[t("div",{style:{padding:"16px","text-align":"left"}},[t("p",null,[t("strong",null,"æ‰¹é‡æ·»åŠ åŠŸèƒ½è¯´æ˜ï¼š")]),t("ol",{style:{"padding-left":"20px",margin:"8px 0"}},[t("li",null,"å¡«å†™å•†å“åŸºæœ¬ä¿¡æ¯ï¼ˆè´§å·ã€é¢œè‰²ã€ä»·æ ¼ç­‰ï¼‰"),t("li",null,"é€‰æ‹©éœ€è¦æ·»åŠ çš„å°ºç ï¼ˆå¯å¤šé€‰ï¼‰"),t("li",null,"ç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºæ¯ä¸ªå°ºç åˆ›å»ºä¸€ä¸ªå•†å“"),t("li",null,"å•†å“åç§°è‡ªåŠ¨ç”Ÿæˆï¼šè´§å·-é¢œè‰²-å°ºç ")]),t("p",{style:{"margin-top":"12px",color:"#ff976a"}},[t("strong",null,"æç¤ºï¼š"),F("æ‰¹é‡æ·»åŠ é€‚åˆåŒæ¬¾ä¸åŒå°ºç çš„å•†å“å¿«é€Ÿå½•å…¥ã€‚ ")])],-1)])]),_:1},8,["show"])])}}},ce=H(re,[["__scopeId","data-v-afc60fe5"]]);export{ce as default};
